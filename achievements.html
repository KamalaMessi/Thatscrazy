<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tools — Achievements</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <aside class="sidebar">
    <div class="brand">thatscrazy.lol</div>

    <nav class="nav">
      <!-- Achievements on top -->
      <a href="achievements.html" class="nav-link active">🏆 Achievements</a>
      <div class="nav-sep" aria-hidden="true"></div>

      <a href="index.html" class="nav-link">🧮 Calculator</a>
      <a href="timer.html" class="nav-link">⏱️ Timer</a>
      <a href="clicker.html" class="nav-link">🖱️ Clicker</a>
    </nav>

    <div class="foot">made to be wrong™</div>
  </aside>

  <main class="content">
    <h1 class="page-title">🏆 Achievements</h1>

    <div class="card">
      <p class="muted">
        This browser keeps your achievements locally (no sync across devices).
      </p>

      <ul id="achList" class="ach-list"></ul>

      <div class="ach-actions">
        <button id="resetBtn" class="btn-ghost">Reset all</button>
      </div>
    </div>
  </main>

  <script>
    // === Local achievements (per browser) ===
    const KEY = 'tc_achievements_v1';

    // Optional starter pool (used only for demo/testing via console)
    const defaultPool = [
      { code:'first-open', name:'First Visit' },
      { code:'click-10',   name:'10 Clicks' },
      { code:'math-fail',  name:'Legendary 67' },
      { code:'timer-gg',   name:'Timer Finished' },
    ];

    function loadAch() {
      try { return JSON.parse(localStorage.getItem(KEY)) || []; }
      catch { return []; }
    }
    function saveAch(list) {
      localStorage.setItem(KEY, JSON.stringify(list));
    }

    function renderAch() {
      const ul = document.getElementById('achList');
      const list = loadAch().sort((a,b) => a.ts - b.ts); // oldest → newest
      ul.innerHTML = list.length
        ? list.map(a => `
            <li>
              <span class="ach-name">✅ ${a.name}</span>
              <span class="ach-code">(${a.code})</span>
            </li>`).join('')
        : '<li class="muted">No achievements… yet 😉</li>';
    }

    function grantAchievement(code, name) {
      const list = loadAch();
      if (!list.some(a => a.code === code)) {
        list.push({ code, name, ts: Date.now() });
        saveAch(list);
        renderAch();
      }
    }

    // Expose a minimal API (so you can call from console on this page)
    window.grantAchievement = grantAchievement;

    // Hook up reset
    document.getElementById('resetBtn').addEventListener('click', () => {
      localStorage.removeItem(KEY);
      renderAch();
    });

    // Render on load
    renderAch();
  </script>
</body>
</html>